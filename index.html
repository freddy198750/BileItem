<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 10px;
            width: 320px;
            text-align: center;
        }
        input, button {
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            background-color: #000;
            color: white;
            cursor: pointer;
            width: auto;
            padding: 8px 16px;
            font-size: 14px;
        }
        button:hover {
            background-color: #333;
        }
        hr {
            border: 0;
            height: 1px;
            background: #ccc;
            margin: 10px 0;
        }
        .flex-row {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
        }
        .button-group {
            display: flex;
            gap: 10px;
            width: auto;
        }
    </style>
</head>
<body>
    <div class="card">
        <input id="quantity" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
        <input id="name" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
        <input id="price" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
        <br>
        <button onclick="addItem()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    </div>

    <div class="card" id="receipt">
        <h2>kbank</h2>
        <p>171-1-48625-5</p>
        <hr>
        <div class="flex-row">
            <span>Item</span>
            <span>Price</span>
        </div>
        <div id="items-list"></div>
        <hr>
        <div class="flex-row">
            <span>t o t a l</span>
            <span id="total">‡∏ø0.00</span>
        </div>
        <hr>
        <p>‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ + ‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
    </div>

    <div class="button-group">
        <button onclick="saveReceipt()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ</button>
        <button onclick="clearItems()">‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>

    <div class="input-button-group">
        <input id="deleteIndex" type="number" placeholder="‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö">
        <button onclick="removeItem()">‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    </div>

    <script>
        let items = [];
        let total = 0;

        function specialFont(text) {
            const mapping = {"0": "O", "1": "ùü∑", "2": "ùü∏", "3": "ùüπ", "4": "ùü∫", "5": "ùüª", "6": "ùüº", "7": "ùüΩ", "8": "ùüæ", "9": "ùüø"};
            return text.split('').map(char => mapping[char] || char).join('');
        }

        function addItem() {
            const quantity = parseInt(document.getElementById('quantity').value);
            const name = document.getElementById('name').value;
            const price = parseFloat(document.getElementById('price').value);
            if (quantity && name && price) {
                items.push({ quantity, name: specialFont(name), price });
                total += price * quantity;
                updateReceipt();
                document.getElementById('quantity').value = "";
                document.getElementById('name').value = "";
                document.getElementById('price').value = "";
            }
        }

        function removeItem() {
            const index = parseInt(document.getElementById('deleteIndex').value) - 1;
            if (!isNaN(index) && index >= 0 && index < items.length) {
                total -= items[index].price * items[index].quantity;
                items.splice(index, 1);
                updateReceipt();
            }
        }

        function clearItems() {
            items = [];
            total = 0;
            updateReceipt();
        }

        function updateReceipt() {
            const list = document.getElementById('items-list');
            list.innerHTML = "";
            items.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = "flex-row";
                div.innerHTML = `<span>${specialFont((index + 1).toString())}. ${specialFont(item.quantity.toString())}x ${item.name}</span><span>${specialFont((item.price * item.quantity).toFixed(2))}</span>`;
                list.appendChild(div);
            });
            document.getElementById('total').innerText = `‡∏ø${specialFont(total.toFixed(2))}`;
        }

        function saveReceipt() {
            html2canvas(document.getElementById('receipt')).then(canvas => {
                const link = document.createElement('a');
                link.href = canvas.toDataURL("image/png");
                link.download = "receipt.png";
                link.click();
            });
        }
    </script>
</body>
</html>
